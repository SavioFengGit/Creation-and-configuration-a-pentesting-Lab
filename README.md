# First-Offensive-Security-Pentesting
Creation and configuration a lab for pentesting

# FASE PRELIMINARE
<br>

Creazione di tre macchine virtuali:
- Attaccante con kali linux .
- Target (Metasploitable 2 basato su linux server).
- Target (Metasploitable 3 basato su windows server 2008).

La parte di creazione e di installazione delle macchine virtuali è dato per scontato, e per questo non inserirò i passaggi nel repository.

Le reti delle macchine virtuali vengono settate tutte su host only adapter per far comunicare le macchine virtuali internamente tra di loro. 

Controllare la raggiungibilità tra le varie macchine attraverso i comandi:
Kali linux nel mio caso ha un indirizzo IP 192.168.56.102 e raggiunge la macchina di metasploitable 3 nello Screenshot di IP 192.168.56.101<br><br>
![image](https://user-images.githubusercontent.com/107345962/176418771-4f70bd91-e38d-4326-ae5b-c81c6c82dfb2.png)<br><br>
Il ping verso la macchina metasploitable 2 con indirizzo IP 192.168.56.103 <br><br>
![image](https://user-images.githubusercontent.com/107345962/176418789-8ed3971f-b158-4594-b6de-4ad0d48c9a01.png) <br><br>
Ricordati di effettuare degli snapshot per salvare lo stato delle macchine.

# PRIMA FASE - INIZIALIZZAZIONE DELLA RETE AZIENDALE
<br>

Utilizziamo gns3 per simulare una rete aziendale, poi lo inseriremo all'interno della nostra rete locale con le tre macchine.<br>
Inseriamo 3 pc collegati attraverso un router cisco, bisogna scaricare l'iso del router3725 e caricarlo su GNS3. <br><br>
![image](https://user-images.githubusercontent.com/107345962/176420663-3c543931-915d-46f4-b029-4a4c3380663f.png)
<br>


Il cloud ci permette di far comunicare la rete con kali linux.
A R1 servono 4 schede di rete. <br>
Di seguito viene mostrata la configurazione di R1 con 4 schede di rete <br><br>
![image](https://user-images.githubusercontent.com/107345962/176420760-1eddfb99-4f16-44c5-a06e-f3054d2e743a.png)
<br>

Dopo si va a configurare il cloud1 inserendo il network "host-only" nella sua interfaccia in modo da permettere la comunicazione tra la rete locale e aziendale. <br><br>
![image](https://user-images.githubusercontent.com/107345962/176421088-61044b28-59d3-4cea-a6f3-6b5d437cdca4.png)
<br>

Connettiamo infine tutti i componenti e startiamo i vari dispositivi per configurarli.


# SECONDA FASE - CONFIGURAZIONE DELLA RETE AZIENDALE
<br>

Assegnamo l'indirizzo 192.168.56.102 (kali linux) alla fastethernet <br>

Apriamo la shell del router e configuriamolo attraverso i seguenti comandi:
- Conf t
- Interface fastEthernet0/0
- Ip address 192.168.56.10 255.255.255.0
- No shut (tira su l'interfaccia)
- Exit
- Exit

<br>
![image](https://user-images.githubusercontent.com/107345962/176424406-959762c0-040a-4209-82dc-a5a19ebcec5a.png)
<br><br>

Lo si fa per tutte le porte  <br>
Interface fastEthernet0/1

- Conf t
- Interface fastEthernet0/1
- Ip address 192.168.10.1 255.255.255.0
- No shut (tira su l'interfaccia)
- Exit
- exit

<br>
Interface fastEthernet1/0

- Conf t
- Interface fastEthernet1/0
- Ip address 192.168.20.1 255.255.255.0
- No shut (tira su l'interfaccia)
- Exit
- Exit

<br>
Interface fastEthernet2/0

- Conf t
- Interface fastEthernet2/0
- Ip address 192.168.30.1 255.255.255.0
- No shut (tira su l'interfaccia)
- Exit
- exit

Ricordatevi di salvare le configurazioni <br>
- copy running-config startup-config (per salvare la config)


Per vedere se la porta è up <br>
- Sh ip interface brief <br> <br>
![image](https://user-images.githubusercontent.com/107345962/176424647-be8880e2-c7df-4d64-9f31-0ff0eac71c65.png)
<br>



Configuriamo il PC-1 <br>
Ip 192.168.10.2 255.255.255.0 192.168.10.1 (l'ultimo è il default gateway e bisogna settarlo). <br>
- Sh ip (per vedere il default gateway) <br>
![image](https://user-images.githubusercontent.com/107345962/176421857-52bbc66a-15c7-4c27-a062-6eea8e0d96b2.png)
<br>

Pinghiamo il default gateway (192.168.10.1) per vedere se la configurazione è avvenuta con successo.
<br>
Configuriamo anche gli altri PC <br>

PC-2 <br>
Ip 192.168.20.2 255.255.255.0 192.168.20.1 <br>

PC-3 <br>
Ip 192.168.30.2 255.255.255.0 192.168.30.1  <br>

Ricordati di fare SAVE per salvare le configurazioni sui pc.

# TERZA FASE - TESTING FINALE E CONFIGURAZIONE DEL DEFAULT GATEWAY SU KALI LINUX
<br>

<b>ATTENZIONE A VOLTE SU GNS3 NON PARTE IL CLOUD E DA UN ERRORE, QUELL'ERRORE è RISOLVIBILE ATTIVANDO DA CMD 
NET START NPF (NON SI ATTIVA A VOLTE IN AUTOMATICO) </b>


- Testa i vari ping tra i vari pc, per vedere la raggiungibilità di tutti i pc.
- Imposta il default gateway su kali linux (integrazione della rete gns3 con kali linux)
- Prova a pingare da kali su 192.168.56.10 per vedere se lo raggiunge. Pinga l'interfaccia del router. 
<BR>
per impostare il default gateway 56.10 vedi l'immagine di sotto <br>
  
![image](https://user-images.githubusercontent.com/107345962/176422406-002a3be9-7f19-4d29-80e0-24b4e730e8ff.png)
<br>

Prova infine a pingare una delle macchine e non il router, ex 192.168.30.2, se lo raggiunge, allora hai configurato perfettamente il tuo laboratorio dove potrai fare i tuoi test di penetrazione.

Se non vuoi avere nessun tipo di limitazioni nell'eseguire qualsiasi tipo di pentest, ti consiglio di sfruttare i laboratori creati da HackTheBox e TryHackMe.

#Author
Xiao Li Savio Feng
